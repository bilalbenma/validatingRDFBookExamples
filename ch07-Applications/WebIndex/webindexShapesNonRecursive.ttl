@prefix : <http://example.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix wf: <http://data.webfoundation.org#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix qb: <http://purl.org/linked-data/cube#> .
@prefix cex: <http://purl.org/weso/ontology/computex#> .
@prefix dct: <http://purl.org/dc/terms/>.
@prefix skos: <http://www.w3.org/2004/02/skos/core#>.
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix org: <http://www.w3.org/ns/org#> .

# WebIndex in SHACL with 5 observations
# Non recursive

:Country a sh:NodeShape;
 sh:property [ sh:path rdfs:label ;
  sh:datatype xsd:string ; 
  sh:minCount 1 ; sh:maxCount 1 ; ] ;
 sh:property [ sh:path wf:iso2 ; 
  sh:datatype xsd:string ; 
  sh:length 2 ;
  sh:minCount 1 ; sh:maxCount 1 ; ] ;
.

:DataSet a sh:NodeShape ;
 sh:targetClass qb:DataSet ;
 sh:property [ sh:path qb:structure ; 
  sh:hasValue wf:DSD ] ;
 sh:property [ sh:path rdfs:label ; 
  sh:datatype xsd:string ; 
  sh:maxCount 1 ] ;
 sh:property [ sh:path qb:slice ; 
  sh:class qb:Slice ; 
  sh:minCount 0 ] ;
 sh:property [ sh:path dct:publisher ; 
  sh:node :Organization ; 
  sh:minCount 1 ; sh:maxCount 1 ] ;
.

:Slice a sh:NodeShape ;
 sh:targetClass qb:Slice ;
 sh:property [ sh:path qb:sliceStructure ;
	  sh:hasValue wf:sliceByYear ; sh:minCount 1 ; sh:maxCount 1 ;
	] ;
 sh:property [ sh:path qb:observation ;
  sh:class qb:Observation ; 
  sh:minCount 0 ] ;
 sh:property [ sh:path cex:indicator ;
  sh:node :Indicator ; 
  sh:minCount 1 ; sh:maxCount 1 ] ;
.

:Observation a sh:NodeShape;
  sh:targetClass qb:Observation ;
  sh:property [ sh:path rdf:type ;
	sh:in (qb:Observation wf:Observation);
	sh:minCount 2
  ] ;
 sh:property [ sh:path rdf:type ;
   sh:minCount 2 ;
   sh:maxCount 2
 ] ;
 sh:property [ sh:path cex:value ;
  sh:datatype xsd:float ;
  sh:minCount 1 ;
  sh:maxCount 1
 ] ;
 sh:property [ sh:path rdfs:label ;
   sh:datatype xsd:string ;
   sh:minCount 0 ;
   sh:maxCount 1
 ] ;
 sh:property [ sh:path dct:issued ;
   sh:datatype xsd:dateTime ;
   sh:minCount 1 ;
   sh:maxCount 1
 ] ;
 sh:or (
  [ sh:property [ sh:path dct:publisher ;
     sh:hasValue wf:WebFoundation ;
    ]
  ]
  [ sh:property [ sh:path dct:publisher ;
     sh:maxCount 0
    ]
  ] 
 ) ;
 sh:property [ sh:path qb:dataSet ;
  sh:class qb:DataSet ;
  sh:minCount 1 ; 
  sh:maxCount 1
 ] ;
 sh:property [ sh:path cex:ref-area ;
  sh:node :Country ;
  sh:minCount 1 ; 
  sh:maxCount 1
 ] ;
 sh:property [ sh:path cex:indicator;
  sh:node :Indicator ;
  sh:minCount 1 ; 
  sh:maxCount 1
 ] ;	
 sh:or (
	[ sh:property [ sh:path wf:source ;
	  sh:nodeKind sh:IRI ;
	  sh:minCount 1 ; 
	  sh:maxCount 1 
	  ] ;
	  sh:property [ sh:path cex:computation ;
	  sh:maxCount 0
	  ]
	]
	[ sh:property [ sh:path cex:computation ;
	  sh:node :Computation ;
	  sh:minCount 1 ; 
	  sh:maxCount 1 
	  ] ;
	  sh:property [ sh:path wf:source ;
	  sh:maxCount 0
	  ] ;
	]
  ) 
.	

:Computation a sh:NodeShape, rdfs:Class ;
 sh:property [ sh:path rdf:type ;
  sh:hasValue cex:Computation 
 ] .

:Indicator a sh:NodeShape;
 sh:targetSubjectsOf cex:Indicator; 
 sh:property [ sh:path rdf:type ;
	  sh:in (
	     wf:PrimaryIndicator 
	     wf:SecondaryIndicator
	  ) ;
	  sh:minCount 1 ;
	  sh:maxCount 1 ;
	] ; 
 sh:property [
	  sh:path rdfs:label ;
	  sh:datatype xsd:string ;
	  sh:minCount 1 ;
	  sh:maxCount 1 ;
	] ; 
 sh:property [
	  sh:path wf:provider ;
	  sh:node :Organization ;
	  sh:minCount 1 ;
	  sh:maxCount 1 ;
	] ; 
.	

:Organization a sh:NodeShape;
 sh:targetClass org:Organization ;
 sh:closed true ;
 sh:ignoredProperties (rdf:type) ;
 sh:property [ sh:path rdf:type ;
   sh:hasValue org:Organization ;
  ] ;
 sh:property [ sh:path rdfs:label ;
  sh:datatype xsd:string ;
  sh:minCount 1 ;
  sh:maxCount 1 ;
  ] ;
 sh:property [ sh:path foaf:homepage ;
  sh:nodeKind sh:IRI ;
  sh:minCount 1 ;
  sh:maxCount 1 ;
] ;
.

#############################################	

:obs5   a              wf:Observation , qb:Observation ;
        rdfs:label     "obs5" ;
        wf:source      :source5 ;
        dct:issued     "2015-05-30T09:00:00"^^xsd:dateTime ;
        qb:dataSet     :dataSet1 ;
        cex:indicator  :indicator1 ;
        cex:ref-area   :country1 ;
        cex:value      "0.9739949"^^xsd:float .

:slice1  a                 qb:Slice ;
        qb:observation     :obs5 , :obs4 , :obs3 , :obs2 , :obs1 ;
        qb:sliceStructure  wf:sliceByYear ;
        cex:indicator      :indicator1 .

:org1   a              org:Organization ;
        rdfs:label     "org1" ;
        foaf:homepage  :homepageOrg1 .

:country1  rdfs:label  "country1" ;
        wf:iso2     "c1" .

:obs3   a                qb:Observation , wf:Observation ;
        rdfs:label       "obs3" ;
        dct:issued       "2015-05-30T09:00:00"^^xsd:dateTime ;
        dct:publisher    wf:WebFoundation ;
        qb:dataSet       :dataSet1 ;
        cex:computation  [ a  cex:Computation ] ;
        cex:indicator    :indicator1 ;
        cex:ref-area     :country1 ;
        cex:value        "0.84614927"^^xsd:float .

:indicator1  a       wf:PrimaryIndicator ;
        rdfs:label   "indicator1" ;
        wf:provider  :org1 .

:dataSet1  a           qb:DataSet ;
        rdfs:label     "dataSet1" ;
        dct:publisher  :org1 ;
        qb:slice       :slice1 ;
        qb:structure   wf:DSD .

:obs1   a              wf:Observation , qb:Observation ;
        rdfs:label     "obs1" ;
        wf:source      :source1 ;
        dct:issued     "2015-05-30T09:00:00"^^xsd:dateTime ;
        qb:dataSet     :dataSet1 ;
        cex:indicator  :indicator1 ;
        cex:ref-area   :country1 ;
        cex:value      "0.45825374"^^xsd:float .

:obs4   a              wf:Observation , qb:Observation ;
        rdfs:label     "obs4" ;
        wf:source      :source4 ;
        dct:issued     "2015-05-30T09:00:00"^^xsd:dateTime ;
        dct:publisher  wf:WebFoundation ;
        qb:dataSet     :dataSet1 ;
        cex:indicator  :indicator1 ;
        cex:ref-area   :country1 ;
        cex:value      "0.99028105"^^xsd:float .

:Organization  sh:targetNode  :org1 .

:obs2   a                qb:Observation , wf:Observation ;
        rdfs:label       "obs2" ;
        dct:issued       "2015-05-30T09:00:00"^^xsd:dateTime ;
        dct:publisher    wf:WebFoundation ;
        qb:dataSet       :dataSet1 ;
        cex:computation  [ a  cex:Computation ] ;
        cex:indicator    :indicator1 ;
        cex:ref-area     :country1 ;
        cex:value        "0.9766802"^^xsd:float .

:DataSet  sh:targetNode  :dataSet1 .

